<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retina: recepción y transmisión de infrarrojos: port/nucleo_stm32f446re/src/port_system.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Retina: recepción y transmisión de infrarrojos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('port__system_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">port_system.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>File that defines the functions that are related to the access to the specific HW of the microcontroller.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="port__system_8h.html">port_system.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaa8c76e274d0f6dd2cefb5d0b17fbc37"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#aaa8c76e274d0f6dd2cefb5d0b17fbc37">HSI_VALUE</a>&#160;&#160;&#160;((uint32_t)16000000)</td></tr>
<tr class="separator:aaa8c76e274d0f6dd2cefb5d0b17fbc37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a93f514700ccf00d08dbdcff7f1224eb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a93f514700ccf00d08dbdcff7f1224eb2">SystemInit</a> (void)</td></tr>
<tr class="memdesc:a93f514700ccf00d08dbdcff7f1224eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the microcontroller system Initialize the FPU setting, vector table location and External memory configuration.  <a href="port__system_8c.html#a93f514700ccf00d08dbdcff7f1224eb2">More...</a><br /></td></tr>
<tr class="separator:a93f514700ccf00d08dbdcff7f1224eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d5ba05020fc08f0c6b6e3fbd32281c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a58d5ba05020fc08f0c6b6e3fbd32281c">system_clock_config</a> (void)</td></tr>
<tr class="memdesc:a58d5ba05020fc08f0c6b6e3fbd32281c"><td class="mdescLeft">&#160;</td><td class="mdescRight">System Clock Configuration.  <a href="port__system_8c.html#a58d5ba05020fc08f0c6b6e3fbd32281c">More...</a><br /></td></tr>
<tr class="separator:a58d5ba05020fc08f0c6b6e3fbd32281c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128d80ffebb4b4feadb28e757ac257cc"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a128d80ffebb4b4feadb28e757ac257cc">port_system_init</a> ()</td></tr>
<tr class="memdesc:a128d80ffebb4b4feadb28e757ac257cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is based on the initialization of the HAL Library; it must be the first thing to be executed in the main program (before to call any other functions), it performs the following:  <a href="port__system_8c.html#a128d80ffebb4b4feadb28e757ac257cc">More...</a><br /></td></tr>
<tr class="separator:a128d80ffebb4b4feadb28e757ac257cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a074aef083dd161b065792c32eac436dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a074aef083dd161b065792c32eac436dc">port_system_power_stop</a> ()</td></tr>
<tr class="memdesc:a074aef083dd161b065792c32eac436dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the system in <b>stop mode</b> for low power consumption.  <a href="port__system_8c.html#a074aef083dd161b065792c32eac436dc">More...</a><br /></td></tr>
<tr class="separator:a074aef083dd161b065792c32eac436dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92076810565c6eb7703e32ae44a5858d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a92076810565c6eb7703e32ae44a5858d">port_system_sleep</a> ()</td></tr>
<tr class="memdesc:a92076810565c6eb7703e32ae44a5858d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable low power consumption in sleep mode.  <a href="port__system_8c.html#a92076810565c6eb7703e32ae44a5858d">More...</a><br /></td></tr>
<tr class="separator:a92076810565c6eb7703e32ae44a5858d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4195733ffd32da0ab22407284b5a94eb"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a4195733ffd32da0ab22407284b5a94eb">port_system_get_millis</a> ()</td></tr>
<tr class="memdesc:a4195733ffd32da0ab22407284b5a94eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the count of the System tick in milliseconds.  <a href="port__system_8c.html#a4195733ffd32da0ab22407284b5a94eb">More...</a><br /></td></tr>
<tr class="separator:a4195733ffd32da0ab22407284b5a94eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ca17ba9c9d055d442cf1e4a73be046"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#ae6ca17ba9c9d055d442cf1e4a73be046">port_system_delay_ms</a> (uint32_t ms)</td></tr>
<tr class="memdesc:ae6ca17ba9c9d055d442cf1e4a73be046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for some milliseconds.  <a href="port__system_8c.html#ae6ca17ba9c9d055d442cf1e4a73be046">More...</a><br /></td></tr>
<tr class="separator:ae6ca17ba9c9d055d442cf1e4a73be046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea53d22d21120e209983ae0753b35d87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#aea53d22d21120e209983ae0753b35d87">port_system_delay_until_ms</a> (uint32_t *p_t, uint32_t ms)</td></tr>
<tr class="memdesc:aea53d22d21120e209983ae0753b35d87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for some milliseconds from a time reference.  <a href="port__system_8c.html#aea53d22d21120e209983ae0753b35d87">More...</a><br /></td></tr>
<tr class="separator:aea53d22d21120e209983ae0753b35d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e8de493a73a0358c667112dd67b073f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a9e8de493a73a0358c667112dd67b073f">port_system_systick_resume</a> ()</td></tr>
<tr class="memdesc:a9e8de493a73a0358c667112dd67b073f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume Tick increment.  <a href="port__system_8c.html#a9e8de493a73a0358c667112dd67b073f">More...</a><br /></td></tr>
<tr class="separator:a9e8de493a73a0358c667112dd67b073f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2df29052308e4d654c413acd4cad742"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#ac2df29052308e4d654c413acd4cad742">port_system_systick_suspend</a> ()</td></tr>
<tr class="memdesc:ac2df29052308e4d654c413acd4cad742"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend Tick increment.  <a href="port__system_8c.html#ac2df29052308e4d654c413acd4cad742">More...</a><br /></td></tr>
<tr class="separator:ac2df29052308e4d654c413acd4cad742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedba1c00f3e11b81226406c03db75c14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#aedba1c00f3e11b81226406c03db75c14">port_system_gpio_config</a> (GPIO_TypeDef *p_port, uint8_t pin, uint8_t mode, uint8_t pupd)</td></tr>
<tr class="memdesc:aedba1c00f3e11b81226406c03db75c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the mode and pull of a GPIO.  <a href="port__system_8c.html#aedba1c00f3e11b81226406c03db75c14">More...</a><br /></td></tr>
<tr class="separator:aedba1c00f3e11b81226406c03db75c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa8d7afcf0ca35642667612a2dc0b27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#aaaa8d7afcf0ca35642667612a2dc0b27">port_system_gpio_config_exti</a> (GPIO_TypeDef *p_port, uint8_t pin, uint32_t mode)</td></tr>
<tr class="memdesc:aaaa8d7afcf0ca35642667612a2dc0b27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the external interruption or event of a GPIO.  <a href="port__system_8c.html#aaaa8d7afcf0ca35642667612a2dc0b27">More...</a><br /></td></tr>
<tr class="separator:aaaa8d7afcf0ca35642667612a2dc0b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db5ab1cfb0707984ad278b002fcf7fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a0db5ab1cfb0707984ad278b002fcf7fc">port_system_gpio_exti_enable</a> (uint8_t pin, uint8_t priority, uint8_t subpriority)</td></tr>
<tr class="memdesc:a0db5ab1cfb0707984ad278b002fcf7fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable interrupts of a GPIO line (pin)  <a href="port__system_8c.html#a0db5ab1cfb0707984ad278b002fcf7fc">More...</a><br /></td></tr>
<tr class="separator:a0db5ab1cfb0707984ad278b002fcf7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57047fe83ed119973a2ee0891e790459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a57047fe83ed119973a2ee0891e790459">port_system_gpio_exti_disable</a> (uint8_t pin)</td></tr>
<tr class="memdesc:a57047fe83ed119973a2ee0891e790459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable interrupts of a GPIO line (pin)  <a href="port__system_8c.html#a57047fe83ed119973a2ee0891e790459">More...</a><br /></td></tr>
<tr class="separator:a57047fe83ed119973a2ee0891e790459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c2ddb6c83b821abe663b86bc76a08e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a67c2ddb6c83b821abe663b86bc76a08e">port_system_gpio_read</a> (GPIO_TypeDef *p_port, uint8_t pin)</td></tr>
<tr class="memdesc:a67c2ddb6c83b821abe663b86bc76a08e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the digital value of a GPIO.  <a href="port__system_8c.html#a67c2ddb6c83b821abe663b86bc76a08e">More...</a><br /></td></tr>
<tr class="separator:a67c2ddb6c83b821abe663b86bc76a08e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc1d118b9ff134fe7f982a52b6a4049"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a7bc1d118b9ff134fe7f982a52b6a4049">port_system_gpio_write</a> (GPIO_TypeDef *p_port, uint8_t pin, bool value)</td></tr>
<tr class="memdesc:a7bc1d118b9ff134fe7f982a52b6a4049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a digital value in a GPIO atomically.  <a href="port__system_8c.html#a7bc1d118b9ff134fe7f982a52b6a4049">More...</a><br /></td></tr>
<tr class="separator:a7bc1d118b9ff134fe7f982a52b6a4049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac917b3dece5f90ce4c76aaa36cec3553"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#ac917b3dece5f90ce4c76aaa36cec3553">port_system_gpio_toggle</a> (GPIO_TypeDef *p_port, uint8_t pin)</td></tr>
<tr class="memdesc:ac917b3dece5f90ce4c76aaa36cec3553"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle the value of a GPIO.  <a href="port__system_8c.html#ac917b3dece5f90ce4c76aaa36cec3553">More...</a><br /></td></tr>
<tr class="separator:ac917b3dece5f90ce4c76aaa36cec3553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69b13031e799a6a96aa8143cb4432f94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a69b13031e799a6a96aa8143cb4432f94">port_system_gpio_config_alternate</a> (GPIO_TypeDef *p_port, uint8_t pin, uint8_t alternate)</td></tr>
<tr class="memdesc:a69b13031e799a6a96aa8143cb4432f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the alternate function of a GPIO.  <a href="port__system_8c.html#a69b13031e799a6a96aa8143cb4432f94">More...</a><br /></td></tr>
<tr class="separator:a69b13031e799a6a96aa8143cb4432f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e09814056d617c521549e542639b7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#ab5e09814056d617c521549e542639b7e">SysTick_Handler</a> (void)</td></tr>
<tr class="memdesc:ab5e09814056d617c521549e542639b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles the System tick timer that increments the system millisecond counter (global variable).  <a href="port__system_8c.html#ab5e09814056d617c521549e542639b7e">More...</a><br /></td></tr>
<tr class="separator:ab5e09814056d617c521549e542639b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0a6e5e17fcb15f3922e278025acabfa2"><td class="memItemLeft" align="right" valign="top">static volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a0a6e5e17fcb15f3922e278025acabfa2">msTicks</a> = 0</td></tr>
<tr class="separator:a0a6e5e17fcb15f3922e278025acabfa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3cd3e43291e81e795d642b79b6088e6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#aa3cd3e43291e81e795d642b79b6088e6">SystemCoreClock</a> = <a class="el" href="port__system_8c.html#aaa8c76e274d0f6dd2cefb5d0b17fbc37">HSI_VALUE</a></td></tr>
<tr class="separator:aa3cd3e43291e81e795d642b79b6088e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e1d9cd666f0eacbfde31e9932a93466"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a6e1d9cd666f0eacbfde31e9932a93466">AHBPrescTable</a> [16] = {0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 6, 7, 8, 9}</td></tr>
<tr class="separator:a6e1d9cd666f0eacbfde31e9932a93466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4f8b768465842cf854a8f993b375e9"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="port__system_8c.html#a5b4f8b768465842cf854a8f993b375e9">APBPrescTable</a> [8] = {0, 0, 0, 0, 1, 2, 3, 4}</td></tr>
<tr class="separator:a5b4f8b768465842cf854a8f993b375e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File that defines the functions that are related to the access to the specific HW of the microcontroller. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-01 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aaa8c76e274d0f6dd2cefb5d0b17fbc37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa8c76e274d0f6dd2cefb5d0b17fbc37">&#9670;&nbsp;</a></span>HSI_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HSI_VALUE&#160;&#160;&#160;((uint32_t)16000000)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value of the Internal oscillator in Hz </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae6ca17ba9c9d055d442cf1e4a73be046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ca17ba9c9d055d442cf1e4a73be046">&#9670;&nbsp;</a></span>port_system_delay_ms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_delay_ms </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for some milliseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>Number of milliseconds to wait</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea53d22d21120e209983ae0753b35d87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea53d22d21120e209983ae0753b35d87">&#9670;&nbsp;</a></span>port_system_delay_until_ms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_delay_until_ms </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>p_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for some milliseconds from a time reference. </p>
<dl class="section note"><dt>Note</dt><dd>It also updates the time reference to the system time at return.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_t</td><td>Pointer to the time reference </td></tr>
    <tr><td class="paramname">ms</td><td>Number of milliseconds to wait</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4195733ffd32da0ab22407284b5a94eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4195733ffd32da0ab22407284b5a94eb">&#9670;&nbsp;</a></span>port_system_get_millis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t port_system_get_millis </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the count of the System tick in milliseconds. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Return System tick <br  />
</p>
</blockquote>
<dl class="section return"><dt>Returns</dt><dd>uint32_t </dd></dl>

</div>
</div>
<a id="aedba1c00f3e11b81226406c03db75c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedba1c00f3e11b81226406c03db75c14">&#9670;&nbsp;</a></span>port_system_gpio_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_config </td>
          <td>(</td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pupd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the mode and pull of a GPIO. </p>
<pre class="fragment">  ==============================================================================
                          ##### How to use GPIOs #####
  ==============================================================================
  [..]
    (#) Enable the GPIO AHB clock using the RCC-&gt;AHB1ENR register.

    (#) Configure the GPIO pin.
        (++) Configure the IO mode.
        (++) Activate Pull-up, Pull-down resistor.
        (++) In case of Output or alternate function mode, configure the speed if needed.
        (++) Configure digital or analog mode.
        (++) In case of external interrupt/event select the type (interrupt or event) and
             the corresponding trigger event (rising or falling or both).

    (#) In case of external interrupt/event mode selection, configure NVIC IRQ priority
        mapped to the EXTI line and enable it using.

    (#) To get the level of a pin configured in input mode use the GPIOx_IDR register.

    (#) To set/reset the level of a pin configured in output mode use the GPIOx_BSRR register
        to SET (bits 0..15) or RESET (bits 16..31) the GPIO.</pre> <blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Enable GPIOx clock in AHB1ENR <br  />
✅ 2. Set mode in MODER <br  />
✅ 3. Set pull up/down configuration </p>
</blockquote>
<dl class="section note"><dt>Note</dt><dd>This function performs the GPIO Port Clock Enable. It may occur that a port clock is re-enabled, it does not matter if it was already enabled. * </dd>
<dd>
This function enables the AHB1 peripheral clock. After reset, the peripheral clock (used for registers read/write access) is disabled and the application software has to enable this clock before using it.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_port</td><td>Port of the GPIO (CMSIS struct like) </td></tr>
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15) </td></tr>
    <tr><td class="paramname">mode</td><td>Input, output, alternate, or analog </td></tr>
    <tr><td class="paramname">pupd</td><td>Pull-up, pull-down, or no-pull</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a69b13031e799a6a96aa8143cb4432f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69b13031e799a6a96aa8143cb4432f94">&#9670;&nbsp;</a></span>port_system_gpio_config_alternate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_config_alternate </td>
          <td>(</td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>alternate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the alternate function of a GPIO. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. <b>Create a 4-bit base mask</b>. ✅ 2. Shift left the mask depending on the value of the given **<code>pin</code> modulo 8.** <br  />
</p>
</blockquote>
<ul>
<li>&gt; &#160;&#160;&#160;&#160;💡 The value of <code>pin</code> ranges from 0 to 15. The registers GPIOx_AFRH and GPIOx_AFRL implement 8 groups of 4 bits each. In order to use the value of <code>pin</code> as index to select the corresponding group of bits, we can use the remainder of the division by 8. <blockquote class="doxtable">
<p>✅ 3. Clean and set the bits <b>as shown in the tutorial document</b>. <br  />
&#160;&#160;&#160;&#160;💡 Clean the corresponding bit on element <code>0</code> or <code>1</code> of the AFR array (<em>e.g</em>, <code>GPIOA-&gt;AFR[0]</code> for GPIOx_AFRL) <br  />
&#160;&#160;&#160;&#160;💡 Set the given value (<code>alternate</code>) of the alternate function, using bit shifting, for example. <br  />
</p>
</blockquote>
<br  />
<blockquote class="doxtable">
<p>💡 <b>You can define your own masks for each alternate function (not recommended), or you can use the macro <code><a class="el" href="port__system_8h.html#ab10023bfece24287e8d301c535c5eaca">BASE_MASK_TO_POS(m, p)</a></code> to get the mask of a base mask. Example:</b> <br  />
&#160;&#160;&#160;&#160;A base mask <code>m</code> equals <code>0x03</code> (<code>0b 0000 0011</code> in binary) can be shifted <code>p</code> equals <code>8</code> positions <code><a class="el" href="port__system_8h.html#ab10023bfece24287e8d301c535c5eaca">BASE_MASK_TO_POS(0x03, 8)</a></code> resulting in <code>0x300</code> (<code>0b 0011 0000 0000</code> in binary). <br  />
</p>
</blockquote>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The AFR register is a 2-element array representing GPIO alternate function high an low registers (GPIOx_AFRH and GPIOx_AFRL) <br  />
AFRLy: Alternate function selection for port x pin y (y = 0..7) <br  />
AFRHy: Alternate function selection for port x pin y (y = 8..15)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_port</td><td>Port of the GPIO (CMSIS struct like) </td></tr>
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15) </td></tr>
    <tr><td class="paramname">alternate</td><td>Alternate function number (values from 0 to 15) according to table of the datasheet: "Table 11. Alternate function".</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaaa8d7afcf0ca35642667612a2dc0b27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaa8d7afcf0ca35642667612a2dc0b27">&#9670;&nbsp;</a></span>port_system_gpio_config_exti()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_config_exti </td>
          <td>(</td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the external interruption or event of a GPIO. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. <b>Enable the System configuration controller clock (SYSCFG).</b> Enable the SYSCFG by setting the bit SYSCFGEN of the peripheral clock enable register (RCC_APB2ENR). The system configuration controller is used here to manage the external interrupt line connection to the GPIOs. <br  />
&#160;&#160;&#160;&#160;💡 As usual, you can access to the register (<code>APB2ENR</code>) as element of the structure <code>RCC</code>. You can use the macro <code>RCC_APB2ENR_SYSCFGEN</code> defined in <code>stm32f446xx.h</code> to set the bit. Look for the "RCC_APB2ENR" register in the Reference Manual if you need more information. <br  />
<br  />
✅ 2. <b>Associate the external interruption line to the given port.</b> Clean and set the bits <b>as shown in the tutorial document</b>. <br  />
&#160;&#160;&#160;&#160;💡 Depending on the pin number, use the register SYSCFG_EXTICR1, SYSCFG_EXTICR2, SYSCFG_EXTICR3, or SYSCFG_EXTICR4. The structure <code>SYSCFG</code> contains a 4-element array called <code>EXTICR</code>; the first element (<code>EXTICR[0]</code>) configures the register SYSCFG_EXTICR1, and so on. <br  />
&#160;&#160;&#160;&#160;💡 To clean the EXTIx bits, you can create a mask depending on the <code>pin</code> value. <br  />
&#160;&#160;&#160;&#160;💡 To associate the external interruption to the given port, <em>i.e.</em> to set the EXTIx bits, you can create another mask depending on the <code>port</code> value. <br  />
<br  />
✅ 3. <b>Select the direction of the trigger</b>: rising edge, falling edge, or both, depending on the value of the given <code>mode</code>. <br  />
&#160;&#160;&#160;&#160;💡 If <em>rising edge</em>: activate the corresponding bit on the EXTI_RTSR register (element <code>RTSR</code>) of the <code>EXTI</code> structure. <br  />
&#160;&#160;&#160;&#160;💡 If <em>falling edge</em>: activate the corresponding bit on the EXTI_FTSR register (element <code>FTSR</code>) of the <code>EXTI</code> structure. <br  />
&#160;&#160;&#160;&#160;💡 If <em>both</em>: activate the corresponding bit on both registers. <br  />
<br  />
✅ 4. <b>Select the interrupt and/or event request</b>: depending on the value of the given <code>mode</code>. <br  />
&#160;&#160;&#160;&#160;💡 If <em>event request</em> enable: activate the corresponding bit on the EXTI_EMR register (element <code>EMR</code>) of the <code>EXTI</code> structure. <br  />
&#160;&#160;&#160;&#160;💡 If <em>interrupt request</em> enable: activate the corresponding bit on the EXTI_IMR register (element <code>IMR</code>) of the <code>EXTI</code> structure. <br  />
</p>
</blockquote>
<p><br  />
</p><blockquote class="doxtable">
<p>💡 <b>You can define your own masks for each pin value (not recommended), or you can use the <code><a class="el" href="port__system_8h.html#ad8e7767483a0c8f878cab29ad46ec656">BIT_POS_TO_MASK(pin)</a></code> macro to get the mask of a pin.</b> </p>
</blockquote>
<dl class="section warning"><dt>Warning</dt><dd>It is highly recommended to clean the corresponding bit of each register (<code>RSTR</code>, <code>FTSR</code>, <code>EMR</code>, <code>IMR</code>) before activating it.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_port</td><td>Port of the GPIO (CMSIS struct like) </td></tr>
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15) </td></tr>
    <tr><td class="paramname">mode</td><td>Trigger mode can be a combination (OR) of: (i) direction: rising edge (0x01), falling edge (0x02), (ii) event request (0x04), or (iii) interrupt request (0x08). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a57047fe83ed119973a2ee0891e790459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57047fe83ed119973a2ee0891e790459">&#9670;&nbsp;</a></span>port_system_gpio_exti_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_exti_disable </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable interrupts of a GPIO line (pin) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0db5ab1cfb0707984ad278b002fcf7fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db5ab1cfb0707984ad278b002fcf7fc">&#9670;&nbsp;</a></span>port_system_gpio_exti_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_exti_enable </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>subpriority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable interrupts of a GPIO line (pin) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15) </td></tr>
    <tr><td class="paramname">priority</td><td>Priority level (from highest priority: 0, to lowest priority: 15) </td></tr>
    <tr><td class="paramname">subpriority</td><td>Subpriority level (from highest priority: 0, to lowest priority: 15)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67c2ddb6c83b821abe663b86bc76a08e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c2ddb6c83b821abe663b86bc76a08e">&#9670;&nbsp;</a></span>port_system_gpio_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool port_system_gpio_read </td>
          <td>(</td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the digital value of a GPIO. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. <b>Retrieve the value of the IDR register.</b> <br  />
&#160;&#160;&#160;&#160;💡 You must cast the read value to return a <code>bool</code>. <br  />
&#160;&#160;&#160;&#160;💡 You might use the <code><a class="el" href="port__system_8h.html#ad8e7767483a0c8f878cab29ad46ec656">BIT_POS_TO_MASK(pin)</a></code> macro. <br  />
<br  />
✅ 2. <b>Return the value.</b> </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_port</td><td>Port of the GPIO (CMSIS struct like) </td></tr>
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the GPIO was HIGH </dd>
<dd>
<code>false</code> if the GPIO was LOW </dd></dl>

</div>
</div>
<a id="ac917b3dece5f90ce4c76aaa36cec3553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac917b3dece5f90ce4c76aaa36cec3553">&#9670;&nbsp;</a></span>port_system_gpio_toggle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_toggle </td>
          <td>(</td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggle the value of a GPIO. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. <b>Read the value of the GPIO.</b> <br  />
<br  />
✅ 2. <b>Write the opposite value in the GPIO.</b> <br  />
&#160;&#160;&#160;&#160;💡 You might use functions <code><a class="el" href="port__system_8h.html#a67c2ddb6c83b821abe663b86bc76a08e" title="Read the digital value of a GPIO.">port_system_gpio_read()</a></code> and <code><a class="el" href="port__system_8h.html#a7bc1d118b9ff134fe7f982a52b6a4049" title="Write a digital value in a GPIO atomically.">port_system_gpio_write()</a></code> to help you. <br  />
&#160;&#160;&#160;&#160;💡 You might use the macros <code>HIGH</code> and <code>LOW</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_port</td><td>Port of the GPIO (CMSIS struct like) </td></tr>
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7bc1d118b9ff134fe7f982a52b6a4049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bc1d118b9ff134fe7f982a52b6a4049">&#9670;&nbsp;</a></span>port_system_gpio_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_gpio_write </td>
          <td>(</td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a digital value in a GPIO atomically. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. <b>Set the corresponding bit value of the BSRR register</b> to <em>set</em> or <em>reset</em> the output depending on the given <code>value</code>. <br  />
&#160;&#160;&#160;&#160;💡 You might use the macros <code>HIGH</code> and <code>LOW</code>. <br  />
&#160;&#160;&#160;&#160;💡 You might use the <code><a class="el" href="port__system_8h.html#ad8e7767483a0c8f878cab29ad46ec656">BIT_POS_TO_MASK(pin)</a></code> macro. <br  />
</p>
</blockquote>
<dl class="section note"><dt>Note</dt><dd>You can use a +16 offset on the pin index and use the <code><a class="el" href="port__system_8h.html#ad8e7767483a0c8f878cab29ad46ec656">BIT_POS_TO_MASK(pin)</a></code> macro to get the mask when you go to clear a GPIO. Otherwise, you can calculate the pin mask first and then use a 16-position left shift of the mask.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_port</td><td>Port of the GPIO (CMSIS struct like) </td></tr>
    <tr><td class="paramname">pin</td><td>Pin/line of the GPIO (index from 0 to 15) </td></tr>
    <tr><td class="paramname">value</td><td>Boolean value to set the GPIO to HIGH (1, <code>true</code>) or LOW (0, <code>false</code>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a128d80ffebb4b4feadb28e757ac257cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a128d80ffebb4b4feadb28e757ac257cc">&#9670;&nbsp;</a></span>port_system_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t port_system_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is based on the initialization of the HAL Library; it must be the first thing to be executed in the main program (before to call any other functions), it performs the following: </p>
<ul>
<li>Configure the Flash prefetch, instruction and Data caches.</li>
<li>Configures the SysTick to generate an interrupt each 1 millisecond, which is clocked by the HSI (at this stage, the clock is not yet configured and thus the system is running from the internal HSI at 16 MHz).</li>
<li>Set NVIC Group Priority to 4. NVIC_PRIORITYGROUP_4: 4 bits for preemption priority 0 bits for subpriority</li>
<li>Configure the system clock</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>SysTick is used as time base for the delay functions. When using the HAL, the application needs to ensure that the SysTick time base is always set to 1 millisecond to have correct HAL operation. When the NVIC_PRIORITYGROUP_0 is selected, IRQ preemption is no more possible. The pending IRQ priority will be managed only by the subpriority. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Init</td><td>status </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a074aef083dd161b065792c32eac436dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a074aef083dd161b065792c32eac436dc">&#9670;&nbsp;</a></span>port_system_power_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_power_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the system in <b>stop mode</b> for low power consumption. </p>
<p>The function sets the state of the power regulator in <b>stop mode</b>. <br  />
After that, the function sets the system mode in sleep mode, to enter in <b>stop mode</b> when calling <code>_WFI()</code> (wait for interruption). <br  />
The system remains in this line until an external interruption or timer interruption occurs. <br  />
If an interruption occurs the system wakes up and resets the system mode.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 4:</b></p>
<p>✅ 1. Copy the following code in the file <a class="el" href="port__system_8c.html">port_system.c</a>. <br  />
</p>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="port__system_8h.html#a9ba4258bf8d3fa567f2bb0d6c43029a2">port_system_power_stop</a>()</div>
<div class="line">{</div>
<div class="line"> MODIFY_REG(PWR-&gt;CR, (PWR_CR_PDDS | PWR_CR_LPDS), PWR_CR_LPDS);   <span class="comment">// Select the regulator state in Stop mode: Set PDDS and LPDS bits according to PWR_Regulator value</span></div>
<div class="line">  SCB-&gt;SCR |= ((uint32_t)SCB_SCR_SLEEPDEEP_Msk);   <span class="comment">// Set SLEEPDEEP bit of Cortex System Control Register</span></div>
<div class="line"> __WFI(); <span class="comment">// Select Stop mode entry : Request Wait For Interrupt</span></div>
<div class="line"> SCB-&gt;SCR &amp;= ~((uint32_t)SCB_SCR_SLEEPDEEP_Msk); <span class="comment">// Reset SLEEPDEEP bit of Cortex System Control Register</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a92076810565c6eb7703e32ae44a5858d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92076810565c6eb7703e32ae44a5858d">&#9670;&nbsp;</a></span>port_system_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_sleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable low power consumption in sleep mode. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 4:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__system_8h.html#af3c45ccd0a549c3d753b752b726a795f" title="Suspend Tick increment.">port_system_systick_suspend()</a></code> to suspend the count of the SysTick. <br  />
✅ 2. Call function <code><a class="el" href="port__system_8h.html#a9ba4258bf8d3fa567f2bb0d6c43029a2" title="Set the system in stop mode for low power consumption.">port_system_power_stop()</a></code> to enter sleep in <b>stop mode</b>. <br  />
 </p>
</blockquote>

</div>
</div>
<a id="a9e8de493a73a0358c667112dd67b073f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e8de493a73a0358c667112dd67b073f">&#9670;&nbsp;</a></span>port_system_systick_resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_systick_resume </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume Tick increment. </p>
<p>The SysTick timer is the source of time base. It is used to generate interrupts at regular time intervals. Once this function is called, the SysTick interrupt will be enabled and so Tick increment is resumed.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 4:</b></p>
<p>✅ 1. Copy the following code in the file <a class="el" href="port__system_8c.html">port_system.c</a>. <br  />
</p>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="port__system_8h.html#a2dca6b2c8ee48c36828b323f42c47fc8">port_system_systick_resume</a>()</div>
<div class="line">{</div>
<div class="line">  SysTick-&gt;CTRL |= SysTick_CTRL_TICKINT_Msk;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ac2df29052308e4d654c413acd4cad742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2df29052308e4d654c413acd4cad742">&#9670;&nbsp;</a></span>port_system_systick_suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_system_systick_suspend </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend Tick increment. </p>
<p>The SysTick timer is the source of time base. It is used to generate interrupts at regular time intervals. Once this function is called, the SysTick interrupt will be disabled so it saves more energy and it does not generate any interruption.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 4:</b></p>
<p>✅ 1. Copy the following code in the file <a class="el" href="port__system_8c.html">port_system.c</a>. <br  />
</p>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="port__system_8h.html#af3c45ccd0a549c3d753b752b726a795f">port_system_systick_suspend</a>()</div>
<div class="line">{</div>
<div class="line"> SysTick-&gt;CTRL &amp;= ~SysTick_CTRL_TICKINT_Msk;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a58d5ba05020fc08f0c6b6e3fbd32281c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58d5ba05020fc08f0c6b6e3fbd32281c">&#9670;&nbsp;</a></span>system_clock_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void system_clock_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System Clock Configuration. </p>
<dl class="section attention"><dt>Attention</dt><dd>This function should NOT be accesible from the outside to avoid configuration problems. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function starts a system timer that generates a SysTick every 1 ms. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Configure the main internal regulator output voltage</p>

</div>
</div>
<a id="a93f514700ccf00d08dbdcff7f1224eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f514700ccf00d08dbdcff7f1224eb2">&#9670;&nbsp;</a></span>SystemInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the microcontroller system Initialize the FPU setting, vector table location and External memory configuration. </p>
<dl class="section note"><dt>Note</dt><dd>This function is called at startup by CMSIS in startup_stm32f446xx.s. </dd></dl>

</div>
</div>
<a id="ab5e09814056d617c521549e542639b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e09814056d617c521549e542639b7e">&#9670;&nbsp;</a></span>SysTick_Handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SysTick_Handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function handles the System tick timer that increments the system millisecond counter (global variable). </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. <b>Increment the System tick counter <code>msTicks</code> in 1 count.</b> <br  />
 &#160;&#160;&#160;&#160;💡 <code>msTicks</code> is a global <code>static</code> variable declared in <a class="el" href="port__system_8c.html">port_system.c</a>. <br  />
</p>
</blockquote>
<dl class="section warning"><dt>Warning</dt><dd><b>The variable <code>msTicks</code> must be declared volatile!</b> Just because it is modified in this ISR, in order to avoid <a href="https://en.wikipedia.org/wiki/Race_condition"><em>race conditions</em></a> . <b>Add it to the definition</b> after <em>static</em>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6e1d9cd666f0eacbfde31e9932a93466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e1d9cd666f0eacbfde31e9932a93466">&#9670;&nbsp;</a></span>AHBPrescTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t AHBPrescTable[16] = {0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 6, 7, 8, 9}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prescaler values for AHB bus </p>

</div>
</div>
<a id="a5b4f8b768465842cf854a8f993b375e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4f8b768465842cf854a8f993b375e9">&#9670;&nbsp;</a></span>APBPrescTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t APBPrescTable[8] = {0, 0, 0, 0, 1, 2, 3, 4}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prescaler values for APB bus </p>

</div>
</div>
<a id="a0a6e5e17fcb15f3922e278025acabfa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a6e5e17fcb15f3922e278025acabfa2">&#9670;&nbsp;</a></span>msTicks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint32_t msTicks = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Variable to store millisecond ticks. </p><dl class="section warning"><dt>Warning</dt><dd><b>It must be declared volatile!</b> Just because it is modified in an ISR. <b>Add it to the definition</b> after <em>static</em>. </dd></dl>

</div>
</div>
<a id="aa3cd3e43291e81e795d642b79b6088e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cd3e43291e81e795d642b79b6088e6">&#9670;&nbsp;</a></span>SystemCoreClock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t SystemCoreClock = <a class="el" href="port__system_8c.html#aaa8c76e274d0f6dd2cefb5d0b17fbc37">HSI_VALUE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frequency of the System clock </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aport__system_8h_html_af3c45ccd0a549c3d753b752b726a795f"><div class="ttname"><a href="port__system_8h.html#af3c45ccd0a549c3d753b752b726a795f">port_system_systick_suspend</a></div><div class="ttdeci">void port_system_systick_suspend(void)</div><div class="ttdoc">Suspend Tick increment.</div><div class="ttdef"><b>Definition:</b> port_system.c:176</div></div>
<div class="ttc" id="aport__system_8h_html_a9ba4258bf8d3fa567f2bb0d6c43029a2"><div class="ttname"><a href="port__system_8h.html#a9ba4258bf8d3fa567f2bb0d6c43029a2">port_system_power_stop</a></div><div class="ttdeci">void port_system_power_stop(void)</div><div class="ttdoc">Set the system in stop mode for low power consumption.</div><div class="ttdef"><b>Definition:</b> port_system.c:122</div></div>
<div class="ttc" id="aport__system_8h_html_a2dca6b2c8ee48c36828b323f42c47fc8"><div class="ttname"><a href="port__system_8h.html#a2dca6b2c8ee48c36828b323f42c47fc8">port_system_systick_resume</a></div><div class="ttdeci">void port_system_systick_resume(void)</div><div class="ttdoc">Resume Tick increment.</div><div class="ttdef"><b>Definition:</b> port_system.c:171</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_651562d8bf6cfd3e81eff5b570d7df50.html">port</a></li><li class="navelem"><a class="el" href="dir_8e468211b3f447a9458e01c9af4a2f29.html">nucleo_stm32f446re</a></li><li class="navelem"><a class="el" href="dir_8bd554dd5b9c116a11aefb4ea37bcfa2.html">src</a></li><li class="navelem"><a class="el" href="port__system_8c.html">port_system.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
