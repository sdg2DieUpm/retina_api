<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retina: recepciÃ³n y transmisiÃ³n de infrarrojos: common/src/fsm_tx.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Retina: recepciÃ³n y transmisiÃ³n de infrarrojos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fsm__tx_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsm_tx.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Infrared transmitter FSM main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fsm__tx_8h.html">fsm_tx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port__tx_8h.html">port_tx.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfsm__tx__t.html">fsm_tx_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a99fb83031ce9923c84392b4e92f956b5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="fsm__tx_8c.html#a99fb83031ce9923c84392b4e92f956b5a40343b646b045e2d3029021122dc3460">WAIT_TX</a>
 }</td></tr>
<tr class="separator:a99fb83031ce9923c84392b4e92f956b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4d46bd469eb6da1601f21be6de49b218"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#a4d46bd469eb6da1601f21be6de49b218">_wait_for_tx_ticks</a> (uint32_t ticks)</td></tr>
<tr class="memdesc:a4d46bd469eb6da1601f21be6de49b218"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for some ticks. Each tick if the symbol timer lasts for <a class="el" href="fsm__tx_8h.html#ae9d591eb1246aa54fb81895171ee85b7">NEC_TX_TIMER_TICK_BASE_US</a> microseconds.  <a href="fsm__tx_8c.html#a4d46bd469eb6da1601f21be6de49b218">More...</a><br /></td></tr>
<tr class="separator:a4d46bd469eb6da1601f21be6de49b218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a752bdf329ea260dea2ecd761af049836"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#a752bdf329ea260dea2ecd761af049836">_send_NEC_burst</a> (uint8_t tx_id, uint32_t ticks_ON, uint32_t ticks_OFF)</td></tr>
<tr class="memdesc:a752bdf329ea260dea2ecd761af049836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a PWM burst and wait for a silence.  <a href="fsm__tx_8c.html#a752bdf329ea260dea2ecd761af049836">More...</a><br /></td></tr>
<tr class="separator:a752bdf329ea260dea2ecd761af049836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e94eaff8ec6283be044f872d2d0f533"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#a2e94eaff8ec6283be044f872d2d0f533">check_tx_start</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a2e94eaff8ec6283be044f872d2d0f533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if it has been received a code other than '0x00'.  <a href="fsm__tx_8c.html#a2e94eaff8ec6283be044f872d2d0f533">More...</a><br /></td></tr>
<tr class="separator:a2e94eaff8ec6283be044f872d2d0f533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab97d48ffb3b35fd18dd72662fd88195f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#ab97d48ffb3b35fd18dd72662fd88195f">do_tx_start</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ab97d48ffb3b35fd18dd72662fd88195f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the transmission of the received NEC code.  <a href="fsm__tx_8c.html#ab97d48ffb3b35fd18dd72662fd88195f">More...</a><br /></td></tr>
<tr class="separator:ab97d48ffb3b35fd18dd72662fd88195f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5ff29c5e73b66861fc6180f1102da8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#a2b5ff29c5e73b66861fc6180f1102da8">fsm_tx_set_code</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this, uint32_t code)</td></tr>
<tr class="memdesc:a2b5ff29c5e73b66861fc6180f1102da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the code given.  <a href="fsm__tx_8c.html#a2b5ff29c5e73b66861fc6180f1102da8">More...</a><br /></td></tr>
<tr class="separator:a2b5ff29c5e73b66861fc6180f1102da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8345283baebe4201a8d28384880fd105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#a8345283baebe4201a8d28384880fd105">fsm_send_NEC_code</a> (uint8_t tx_id, uint32_t code)</td></tr>
<tr class="memdesc:a8345283baebe4201a8d28384880fd105"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the process to transmit the code stored.  <a href="fsm__tx_8c.html#a8345283baebe4201a8d28384880fd105">More...</a><br /></td></tr>
<tr class="separator:a8345283baebe4201a8d28384880fd105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af495cd84ebd2efbd1420c458f34699b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#af495cd84ebd2efbd1420c458f34699b9">fsm_tx_new</a> (uint8_t tx_id)</td></tr>
<tr class="memdesc:af495cd84ebd2efbd1420c458f34699b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new infrared transmitter FSM.  <a href="fsm__tx_8c.html#af495cd84ebd2efbd1420c458f34699b9">More...</a><br /></td></tr>
<tr class="separator:af495cd84ebd2efbd1420c458f34699b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e752ce58e13cce38506f4a86fc229b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#ab6e752ce58e13cce38506f4a86fc229b">fsm_tx_init</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this, uint8_t tx_id)</td></tr>
<tr class="memdesc:ab6e752ce58e13cce38506f4a86fc229b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an infrared transmitter FSM.  <a href="fsm__tx_8c.html#ab6e752ce58e13cce38506f4a86fc229b">More...</a><br /></td></tr>
<tr class="separator:ab6e752ce58e13cce38506f4a86fc229b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab5d3dbed8b703b2d531f12cc2e2d9279"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfsm__trans__t.html">fsm_trans_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__tx_8c.html#ab5d3dbed8b703b2d531f12cc2e2d9279">fsm_trans_tx</a> []</td></tr>
<tr class="memdesc:ab5d3dbed8b703b2d531f12cc2e2d9279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array representing the transitions table of the FSM infrared transmitter.  <a href="fsm__tx_8c.html#ab5d3dbed8b703b2d531f12cc2e2d9279">More...</a><br /></td></tr>
<tr class="separator:ab5d3dbed8b703b2d531f12cc2e2d9279"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Infrared transmitter FSM main file. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-01 </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a99fb83031ce9923c84392b4e92f956b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fb83031ce9923c84392b4e92f956b5">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a99fb83031ce9923c84392b4e92f956b5a40343b646b045e2d3029021122dc3460"></a>WAIT_TX&#160;</td><td class="fielddoc"><p>Unique state of the FSM waiting to receive a code. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a752bdf329ea260dea2ecd761af049836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a752bdf329ea260dea2ecd761af049836">&#9670;&nbsp;</a></span>_send_NEC_burst()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _send_NEC_burst </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticks_ON</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticks_OFF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a PWM burst and wait for a silence. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Start the PWM burst by setting the PWM timer to <code>true</code> (<code><a class="el" href="port__tx_8h.html#ac956eeec9531523891318c35be479271" title="Set the PWM ON or OFF.">port_tx_pwm_timer_set()</a></code>) <br  />
âœ… 2. Wait for <code>ticks_ON</code> ticks <br  />
âœ… 3. Stop the PWM by setting the PWM timer to <code>false</code> (<code><a class="el" href="port__tx_8h.html#ac956eeec9531523891318c35be479271" title="Set the PWM ON or OFF.">port_tx_pwm_timer_set()</a></code>) <br  />
âœ… 4. Wait for the silence <code>ticks_OFF</code> ticks </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_id</td><td>Unique transmitter identifier number </td></tr>
    <tr><td class="paramname">ticks_ON</td><td>Number of ticks to wait for an active PWM burst </td></tr>
    <tr><td class="paramname">ticks_OFF</td><td>Number of ticks to wait for a silence </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4d46bd469eb6da1601f21be6de49b218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d46bd469eb6da1601f21be6de49b218">&#9670;&nbsp;</a></span>_wait_for_tx_ticks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _wait_for_tx_ticks </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for some ticks. Each tick if the symbol timer lasts for <a class="el" href="fsm__tx_8h.html#ae9d591eb1246aa54fb81895171ee85b7">NEC_TX_TIMER_TICK_BASE_US</a> microseconds. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Get the initial tick from <code><a class="el" href="port__tx_8h.html#a1054e71acf03ca90cfda88fe13f4c0c5" title="Get the count of the symbol ticks.">port_tx_tmr_get_tick()</a></code> <br  />
âœ… 2. Do nothing while the difference between the current tick and the initial tick is lower than the number of <code>ticks</code> to wait <br  />
&#160;&#160;&#160;&#160;ðŸ’¡ This function is the equivalent to the <code><a class="el" href="port__system_8h.html#ae6ca17ba9c9d055d442cf1e4a73be046" title="Wait for some milliseconds.">port_system_delay_ms()</a></code> function. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ticks</td><td>Number of ticks to wait </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e94eaff8ec6283be044f872d2d0f533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e94eaff8ec6283be044f872d2d0f533">&#9670;&nbsp;</a></span>check_tx_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_tx_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if it has been received a code other than '0x00'. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Get the <code>code</code> from the <code><a class="el" href="structfsm__tx__t.html">fsm_tx_t</a></code> struct <br  />
âœ… 2. Return either <code>true</code> or <code>false</code> if the code is other than '0x00', or not, respectively. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__tx__t.html">fsm_tx_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="ab97d48ffb3b35fd18dd72662fd88195f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab97d48ffb3b35fd18dd72662fd88195f">&#9670;&nbsp;</a></span>do_tx_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_tx_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the transmission of the received NEC code. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Call function <code><a class="el" href="fsm__tx_8c.html#a8345283baebe4201a8d28384880fd105" title="Start the process to transmit the code stored.">fsm_send_NEC_code()</a></code> with the right arguments. <br  />
âœ… 2. Set to '0x00' the field <code>code</code> <br  />
</p>
</blockquote>
<dl class="section note"><dt>Note</dt><dd>The function <code><a class="el" href="fsm__tx_8c.html#a8345283baebe4201a8d28384880fd105" title="Start the process to transmit the code stored.">fsm_send_NEC_code()</a></code> will lead to a sequence of function calls to <code>PORT</code> and <code>COMMON</code>. The call graph is depicted in the figure below. Alternatively to this implementation, this sequence could be also implemented as part of the FSM of the transmitter, which could be an improvement of your project as well. <br  />
 <div class="image">
<img src="tx_functions_call_graph.png" alt=""/>
</div>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__tx__t.html">fsm_tx_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8345283baebe4201a8d28384880fd105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8345283baebe4201a8d28384880fd105">&#9670;&nbsp;</a></span>fsm_send_NEC_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_send_NEC_code </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the process to transmit the code stored. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Implement the next flow graph. Some blocks refer to functions to be implemented in <code>port</code>. <br  />
&#160;&#160;&#160;&#160;ðŸ’¡ The <code>bit_mask</code> variable is used as a mask to get each one of the bits of the code received. Starting from the more significant bit and moving right to the less significant bit.</p>
<div class="image">
<img src="flow_chart_send_nec_code.png" alt=""/>
</div>
 </blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_id</td><td>Unique infrared transmitter identifier number </td></tr>
    <tr><td class="paramname">code</td><td>Code of the NEC command to be transmitted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab6e752ce58e13cce38506f4a86fc229b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e752ce58e13cce38506f4a86fc229b">&#9670;&nbsp;</a></span>fsm_tx_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_tx_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an infrared transmitter FSM. </p>
<p>This function initializes the default values of the FSM struct and calls to the <code>port</code> to initialize the HW of associated to the given ID.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Initialize the field <code>tx_id</code> of <code>p_fsm</code> with the received values <br  />
âœ… 2. Initialize the field <code>code</code> of <code>p_fsm</code> with its initial value <br  />
âœ… 3. Call function <code><a class="el" href="port__tx_8h.html#ac51d84674ffc60774e009d161edfae9c" title="Configure the HW specifications of a given infrared transmitter.">port_tx_init()</a></code> </p>
</blockquote>
<dl class="section note"><dt>Note</dt><dd>The main program and the <code>port</code> are the only ones that manage and stablish the ID. The infrared transmitter FSM acts as a man-in-the-middle but this library does not handles the transmitters IDs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__tx__t.html">fsm_tx_t</a></code>. </td></tr>
    <tr><td class="paramname">tx_id</td><td>Unique infrared transmitter identifier number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af495cd84ebd2efbd1420c458f34699b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af495cd84ebd2efbd1420c458f34699b9">&#9670;&nbsp;</a></span>fsm_tx_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__t.html">fsm_t</a>* fsm_tx_new </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new infrared transmitter FSM. </p>
<p>This FSM waits until there is <b>a code different than '0x00'</b> in the field <code>code</code> of the FSM struct.</p>
<p>At start and reset, the code value must be '0x00'. A value of '0x00' means that there is no code to transmit.</p>
<dl class="section attention"><dt>Attention</dt><dd>The user is required to reset the code value once it has been sent. Otherwise, this value may be misinterpreted by the FSM. In such a case we would be transmitting the code constantly. The function <code><a class="el" href="fsm__tx_8c.html#ab97d48ffb3b35fd18dd72662fd88195f" title="Start the transmission of the received NEC code.">do_tx_start()</a></code> resets it after transmission.</dd></dl>
<p>The FSM contains Information of the transmitter ID. This ID is a unique identifier that is managed by the user in the <code>port</code>. That is where the user provides identifiers and HW information for all the transmitters on his system. The FSM does not have to know anything of the underlying HW.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_id</td><td>Unique infrared transmitter identifier number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the infrared transmitter FSM </dd></dl>

</div>
</div>
<a id="a2b5ff29c5e73b66861fc6180f1102da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5ff29c5e73b66861fc6180f1102da8">&#9670;&nbsp;</a></span>fsm_tx_set_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_tx_set_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the code given. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>âœ… 1. Set the field <code>code</code> with the given code if it is not equal to '0x00' <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html">fsm_button_t</a></code>. </td></tr>
    <tr><td class="paramname">code</td><td>Code of the NEC command to be transmitted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab5d3dbed8b703b2d531f12cc2e2d9279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5d3dbed8b703b2d531f12cc2e2d9279">&#9670;&nbsp;</a></span>fsm_trans_tx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> fsm_trans_tx[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array representing the transitions table of the FSM infrared transmitter. </p>
<div class="image">
<img src="fsm_tx.png" alt=""/>
</div>
 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_4e4d22e38ca4e2e8207825ee2d00bc54.html">src</a></li><li class="navelem"><a class="el" href="fsm__tx_8c.html">fsm_tx.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
