<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retina: recepción y transmisión de infrarrojos: common/src/fsm_button.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Retina: recepción y transmisión de infrarrojos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fsm__button_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsm_button.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Button FSM main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="fsm__button_8h.html">fsm_button.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port__button_8h.html">port_button.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfsm__button__t.html">fsm_button_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to define the Button FSM.  <a href="structfsm__button__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:acd7caaebd935f2c31359e79110f682b6"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#acd7caaebd935f2c31359e79110f682b6">FSM_BUTTON</a> { <br />
&#160;&#160;<a class="el" href="fsm__button_8c.html#acd7caaebd935f2c31359e79110f682b6a666f5349284be6384467ac357ec7d461">BUTTON_RELEASED</a> = 0, 
<br />
&#160;&#160;<a class="el" href="fsm__button_8c.html#acd7caaebd935f2c31359e79110f682b6a9a80c0309c6a131641f74f0dea282ddf">BUTTON_RELEASED_WAIT</a>, 
<br />
&#160;&#160;<a class="el" href="fsm__button_8c.html#acd7caaebd935f2c31359e79110f682b6abd19dea9e19d02d7d39464dfdde1e48b">BUTTON_PRESSED</a>, 
<br />
&#160;&#160;<a class="el" href="fsm__button_8c.html#acd7caaebd935f2c31359e79110f682b6a4145383ff5556588d3da0b1ae267f1c7">BUTTON_PRESSED_WAIT</a>
<br />
 }</td></tr>
<tr class="separator:acd7caaebd935f2c31359e79110f682b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6d7f3b45d7c77e10f69225090bb996bd"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#a6d7f3b45d7c77e10f69225090bb996bd">check_button_pressed</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a6d7f3b45d7c77e10f69225090bb996bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the button has been pressed.  <a href="fsm__button_8c.html#a6d7f3b45d7c77e10f69225090bb996bd">More...</a><br /></td></tr>
<tr class="separator:a6d7f3b45d7c77e10f69225090bb996bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d1e03c9c3646d44585e3eef1e15d78"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#ac5d1e03c9c3646d44585e3eef1e15d78">check_button_released</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ac5d1e03c9c3646d44585e3eef1e15d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the button has been released.  <a href="fsm__button_8c.html#ac5d1e03c9c3646d44585e3eef1e15d78">More...</a><br /></td></tr>
<tr class="separator:ac5d1e03c9c3646d44585e3eef1e15d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f02469ecb017e449a64fffc2feea43"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#ad6f02469ecb017e449a64fffc2feea43">check_timeout</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ad6f02469ecb017e449a64fffc2feea43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the debounce-time has passed.  <a href="fsm__button_8c.html#ad6f02469ecb017e449a64fffc2feea43">More...</a><br /></td></tr>
<tr class="separator:ad6f02469ecb017e449a64fffc2feea43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a408606e4da6d7f5578eaa4c55586bac4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#a408606e4da6d7f5578eaa4c55586bac4">do_store_tick_pressed</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a408606e4da6d7f5578eaa4c55586bac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the system tick when the button was pressed.  <a href="fsm__button_8c.html#a408606e4da6d7f5578eaa4c55586bac4">More...</a><br /></td></tr>
<tr class="separator:a408606e4da6d7f5578eaa4c55586bac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb3caa779f91f008bb89a419921ab83c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#afb3caa779f91f008bb89a419921ab83c">do_set_duration</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:afb3caa779f91f008bb89a419921ab83c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the duration of the button press.  <a href="fsm__button_8c.html#afb3caa779f91f008bb89a419921ab83c">More...</a><br /></td></tr>
<tr class="separator:afb3caa779f91f008bb89a419921ab83c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1e6388ab7f1216269fe912a11cf814"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#adf1e6388ab7f1216269fe912a11cf814">fsm_button_get_duration</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:adf1e6388ab7f1216269fe912a11cf814"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the duration of the last button press.  <a href="fsm__button_8c.html#adf1e6388ab7f1216269fe912a11cf814">More...</a><br /></td></tr>
<tr class="separator:adf1e6388ab7f1216269fe912a11cf814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad72c67d37f009c4b627d12be1d00c25f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#ad72c67d37f009c4b627d12be1d00c25f">fsm_button_reset_duration</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ad72c67d37f009c4b627d12be1d00c25f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the duration of the last button press.  <a href="fsm__button_8c.html#ad72c67d37f009c4b627d12be1d00c25f">More...</a><br /></td></tr>
<tr class="separator:ad72c67d37f009c4b627d12be1d00c25f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf704fc576ceb5a46854212403aae389"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#acf704fc576ceb5a46854212403aae389">fsm_button_new</a> (uint32_t debounce_time, uint32_t button_id)</td></tr>
<tr class="memdesc:acf704fc576ceb5a46854212403aae389"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new button FSM.  <a href="fsm__button_8c.html#acf704fc576ceb5a46854212403aae389">More...</a><br /></td></tr>
<tr class="separator:acf704fc576ceb5a46854212403aae389"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3478c3cda06d0305998a6042ea652604"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#a3478c3cda06d0305998a6042ea652604">fsm_button_init</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this, uint32_t debounce_time, uint32_t button_id)</td></tr>
<tr class="memdesc:a3478c3cda06d0305998a6042ea652604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a button FSM.  <a href="fsm__button_8c.html#a3478c3cda06d0305998a6042ea652604">More...</a><br /></td></tr>
<tr class="separator:a3478c3cda06d0305998a6042ea652604"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2c6b916a1be7cf63eff3f7508e3e09a8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfsm__trans__t.html">fsm_trans_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__button_8c.html#a2c6b916a1be7cf63eff3f7508e3e09a8">fsm_trans_button</a> []</td></tr>
<tr class="memdesc:a2c6b916a1be7cf63eff3f7508e3e09a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array representing the transitions table of the FSM button.  <a href="fsm__button_8c.html#a2c6b916a1be7cf63eff3f7508e3e09a8">More...</a><br /></td></tr>
<tr class="separator:a2c6b916a1be7cf63eff3f7508e3e09a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Button FSM main file. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-01 </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="acd7caaebd935f2c31359e79110f682b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd7caaebd935f2c31359e79110f682b6">&#9670;&nbsp;</a></span>FSM_BUTTON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="fsm__button_8c.html#acd7caaebd935f2c31359e79110f682b6">FSM_BUTTON</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="acd7caaebd935f2c31359e79110f682b6a666f5349284be6384467ac357ec7d461"></a>BUTTON_RELEASED&#160;</td><td class="fielddoc"><p>Starting state. Also comes here when the button has been released </p>
</td></tr>
<tr><td class="fieldname"><a id="acd7caaebd935f2c31359e79110f682b6a9a80c0309c6a131641f74f0dea282ddf"></a>BUTTON_RELEASED_WAIT&#160;</td><td class="fielddoc"><p>State to perform the anti-debounce mechanism for a falling edge <br  />
 </p>
</td></tr>
<tr><td class="fieldname"><a id="acd7caaebd935f2c31359e79110f682b6abd19dea9e19d02d7d39464dfdde1e48b"></a>BUTTON_PRESSED&#160;</td><td class="fielddoc"><p>State while the button is being pressed </p>
</td></tr>
<tr><td class="fieldname"><a id="acd7caaebd935f2c31359e79110f682b6a4145383ff5556588d3da0b1ae267f1c7"></a>BUTTON_PRESSED_WAIT&#160;</td><td class="fielddoc"><p>State to perform the anti-debounce mechanism for a rising edge <br  />
 </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6d7f3b45d7c77e10f69225090bb996bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d7f3b45d7c77e10f69225090bb996bd">&#9670;&nbsp;</a></span>check_button_pressed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_button_pressed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the button has been pressed. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__button_8h.html#aba3babbb7f811461f16f7ab309ee660b" title="Return the status of the button (pressed or not)">port_button_is_pressed()</a></code> and retrieve the status <br  />
✅ 2. Return the status </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="ac5d1e03c9c3646d44585e3eef1e15d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d1e03c9c3646d44585e3eef1e15d78">&#9670;&nbsp;</a></span>check_button_released()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_button_released </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the button has been released. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__button_8h.html#aba3babbb7f811461f16f7ab309ee660b" title="Return the status of the button (pressed or not)">port_button_is_pressed()</a></code> and retrieve the status <br  />
✅ 2. Return the inverse of the status </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="ad6f02469ecb017e449a64fffc2feea43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f02469ecb017e449a64fffc2feea43">&#9670;&nbsp;</a></span>check_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the debounce-time has passed. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__button_8h.html#a3721657d1ac1da581da5efec19581b7d" title="Return the count of the System tick in milliseconds.">port_button_get_tick()</a></code> and retrieve the current system tick <br  />
✅ 2. Check if the current system tick is higher than the field <code>next_timeout</code> <br  />
✅ 3. Return <code>true</code> if it is higher, otherwise return <code>false</code> </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="afb3caa779f91f008bb89a419921ab83c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb3caa779f91f008bb89a419921ab83c">&#9670;&nbsp;</a></span>do_set_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_set_duration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the duration of the button press. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__button_8h.html#a3721657d1ac1da581da5efec19581b7d" title="Return the count of the System tick in milliseconds.">port_button_get_tick()</a></code> and retrieve the current system tick <br  />
✅ 2. Update the field <code>duration</code> considering it and the field <code>tick_pressed</code> <br  />
✅ 3. Update the field <code>next_timeout</code> considering the current tick and the field <code>debounce_time</code> </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a408606e4da6d7f5578eaa4c55586bac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a408606e4da6d7f5578eaa4c55586bac4">&#9670;&nbsp;</a></span>do_store_tick_pressed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_store_tick_pressed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the system tick when the button was pressed. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="port__button_8h.html#a3721657d1ac1da581da5efec19581b7d" title="Return the count of the System tick in milliseconds.">port_button_get_tick()</a></code> and retrieve the current system tick <br  />
✅ 2. Store it in the field <code>tick_pressed</code> <br  />
✅ 3. Update the field <code>next_timeout</code> considering the current tick and the field <code>debounce_time</code> </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf1e6388ab7f1216269fe912a11cf814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf1e6388ab7f1216269fe912a11cf814">&#9670;&nbsp;</a></span>fsm_button_get_duration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t fsm_button_get_duration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the duration of the last button press. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Retrieve and return the field <code>duration</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t </dd></dl>

</div>
</div>
<a id="a3478c3cda06d0305998a6042ea652604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3478c3cda06d0305998a6042ea652604">&#9670;&nbsp;</a></span>fsm_button_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_button_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>debounce_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>button_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a button FSM. </p>
<p>This function initializes the default values of the FSM struct and calls to the <code>port</code> to initialize the HW of associated to the given ID.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Initialize the fields <code>debounce_time</code>, <code>button_id</code> of <code>p_fsm</code> with the received values <br  />
✅ 2. Initialize the fields <code>tick_pressed</code>, <code>duration</code> of <code>p_fsm</code> with 0 <br  />
✅ 3. Call function <code><a class="el" href="port__button_8h.html#a8a60ec4a29c03b384c975a7780082ca3" title="Configure the HW specifications of a given button.">port_button_init()</a></code> </p>
</blockquote>
<dl class="section note"><dt>Note</dt><dd>The main program and the <code>port</code> are the only ones that manage and stablish the ID. The button FSM acts as a man-in-the-middle but this library does not handles the button IDs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
    <tr><td class="paramname">debounce_time</td><td>Anti-debounce time in milliseconds </td></tr>
    <tr><td class="paramname">button_id</td><td>Unique button identifier number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acf704fc576ceb5a46854212403aae389"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf704fc576ceb5a46854212403aae389">&#9670;&nbsp;</a></span>fsm_button_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__t.html">fsm_t</a>* fsm_button_new </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>debounce_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>button_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new button FSM. </p>
<p>This FSM implements an anti-debounce mechanism. Debounces (or very fast button presses) lasting less than the <code>debounce_time</code> are filtered out.</p>
<p>The FSM stores the duration of the last button press. The user should ask for it using the function <code><a class="el" href="fsm__button_8h.html#adf1e6388ab7f1216269fe912a11cf814" title="Return the duration of the last button press.">fsm_button_get_duration()</a></code>.</p>
<p>At start and reset, the duration value must be 0 ms. A value of 0 ms means that there has not been a new button press.</p>
<dl class="section attention"><dt>Attention</dt><dd>The user is required to reset the duration value once it has been read. Otherwise, this value may be misinterpreted by the user, if successive calls are made without having pressed the button. In such a case we would be reading past information. In order to reset the value, the function <code><a class="el" href="fsm__button_8h.html#ad72c67d37f009c4b627d12be1d00c25f" title="Reset the duration of the last button press.">fsm_button_reset_duration()</a></code> must be called.</dd></dl>
<p>In other words, the status flag of this FSM is the variable duration. A duration of 0 means that there has been no new button press, a value other than 0 represents that it has been pressed and the value is its duration, and thus it is the user's responsibility to clear this state flag.</p>
<p>The FSM contains Information of the button ID. This ID is a unique identifier that is managed by the user in the <code>port</code>. That is where the user provides identifiers and HW information for all the buttons on his system. The FSM does not have to know anything of the underlying HW.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debounce_time</td><td>Anti-debounce time in milliseconds </td></tr>
    <tr><td class="paramname">button_id</td><td>Unique button identifier number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the button FSM </dd></dl>

</div>
</div>
<a id="ad72c67d37f009c4b627d12be1d00c25f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad72c67d37f009c4b627d12be1d00c25f">&#9670;&nbsp;</a></span>fsm_button_reset_duration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_button_reset_duration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the duration of the last button press. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Set to 0 the field <code>duration</code> <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__button__t.html" title="Structure to define the Button FSM.">fsm_button_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2c6b916a1be7cf63eff3f7508e3e09a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c6b916a1be7cf63eff3f7508e3e09a8">&#9670;&nbsp;</a></span>fsm_trans_button</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> fsm_trans_button[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array representing the transitions table of the FSM button. </p>
<div class="image">
<img src="fsm_button.png" alt=""/>
</div>
 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_4e4d22e38ca4e2e8207825ee2d00bc54.html">src</a></li><li class="navelem"><a class="el" href="fsm__button_8c.html">fsm_button.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
