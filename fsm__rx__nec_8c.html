<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Retina: recepción y transmisión de infrarrojos: common/src/fsm_rx_nec.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Retina: recepción y transmisión de infrarrojos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fsm__rx__nec_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsm_rx_nec.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>NEC processing FSM main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fsm__rx__nec_8h.html">fsm_rx_nec.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfsm__rx__nec__t.html">fsm_rx_nec_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to define the NEC FSM.  <a href="structfsm__rx__nec__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a43148ac7e1e7255aaf72bbc0a161b4be"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4be">FSM_RX_NEC</a> { <br />
&#160;&#160;<a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a>, 
<br />
&#160;&#160;<a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea363d3765068b3b1be9fb4e0f8418d101">NEC_INIT</a>, 
<br />
&#160;&#160;<a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea49337ef62cfd41f06228546f18826e0c">NEC_SYMBOL_SILENCE</a>, 
<br />
&#160;&#160;<a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea4d930a7b04939f1ce2e86a310b55d86e">NEC_SYMBOL_PULSE</a>
<br />
 }</td></tr>
<tr class="separator:a43148ac7e1e7255aaf72bbc0a161b4be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a41d34b17798262ab95c14141f9be51b1"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1">_get_diff_ticks</a> (uint16_t *p_edge_ticks)</td></tr>
<tr class="memdesc:a41d34b17798262ab95c14141f9be51b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary function to compute the time difference (in ticks) between the current and the next edge.  <a href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1">More...</a><br /></td></tr>
<tr class="separator:a41d34b17798262ab95c14141f9be51b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd945b51ef6927ae34c0c06ee5a3219f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f">_value_in_range</a> (uint16_t value, uint16_t min, uint16_t max)</td></tr>
<tr class="memdesc:acd945b51ef6927ae34c0c06ee5a3219f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary function to check if a given value is between two other values.  <a href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f">More...</a><br /></td></tr>
<tr class="separator:acd945b51ef6927ae34c0c06ee5a3219f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ddf7564dfbb21d8734d1e31600fec7"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a01ddf7564dfbb21d8734d1e31600fec7">check_is_init_silence</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a01ddf7564dfbb21d8734d1e31600fec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the silence (low level) of the NEC prologue.  <a href="fsm__rx__nec_8c.html#a01ddf7564dfbb21d8734d1e31600fec7">More...</a><br /></td></tr>
<tr class="separator:a01ddf7564dfbb21d8734d1e31600fec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9017904e997631307705dc351a083947"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a9017904e997631307705dc351a083947">check_is_init_noise</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a9017904e997631307705dc351a083947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assuming that we are parsing the silence (low level) of the NEC prologue, check if it is noise.  <a href="fsm__rx__nec_8c.html#a9017904e997631307705dc351a083947">More...</a><br /></td></tr>
<tr class="separator:a9017904e997631307705dc351a083947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb69abb054df56d1c0f2812aeaf25c68"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#adb69abb054df56d1c0f2812aeaf25c68">check_is_prologue_pulse</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:adb69abb054df56d1c0f2812aeaf25c68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the pulse (high level) of the NEC prologue.  <a href="fsm__rx__nec_8c.html#adb69abb054df56d1c0f2812aeaf25c68">More...</a><br /></td></tr>
<tr class="separator:adb69abb054df56d1c0f2812aeaf25c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e18ccf6b8ff9d748c389587f81645f1"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a6e18ccf6b8ff9d748c389587f81645f1">check_is_repetition_pulse</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a6e18ccf6b8ff9d748c389587f81645f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the pulse (high level) of a NEC repetition.  <a href="fsm__rx__nec_8c.html#a6e18ccf6b8ff9d748c389587f81645f1">More...</a><br /></td></tr>
<tr class="separator:a6e18ccf6b8ff9d748c389587f81645f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc929ec58cc2ea50df050002706a8d3"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#aedc929ec58cc2ea50df050002706a8d3">check_is_init_pulse_noise</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:aedc929ec58cc2ea50df050002706a8d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assuming that we are parsing the pulse (high level) of the NEC prologue, check if it is noise.  <a href="fsm__rx__nec_8c.html#aedc929ec58cc2ea50df050002706a8d3">More...</a><br /></td></tr>
<tr class="separator:aedc929ec58cc2ea50df050002706a8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2837dd36bc73b31f02c9cb2c9a022939"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a2837dd36bc73b31f02c9cb2c9a022939">check_is_last_symbol</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a2837dd36bc73b31f02c9cb2c9a022939"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the last symbol.  <a href="fsm__rx__nec_8c.html#a2837dd36bc73b31f02c9cb2c9a022939">More...</a><br /></td></tr>
<tr class="separator:a2837dd36bc73b31f02c9cb2c9a022939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9b517be66df83069f390587ef75bea5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#af9b517be66df83069f390587ef75bea5">check_is_symbol_silence</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:af9b517be66df83069f390587ef75bea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the silence (low level) of a NEC symbol.  <a href="fsm__rx__nec_8c.html#af9b517be66df83069f390587ef75bea5">More...</a><br /></td></tr>
<tr class="separator:af9b517be66df83069f390587ef75bea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06eff41f2393b373179804934f8252f5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a06eff41f2393b373179804934f8252f5">check_is_symbol_silence_noise</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a06eff41f2393b373179804934f8252f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assuming that we are parsing the silence (low level) of a NEC symbol, check if it is noise.  <a href="fsm__rx__nec_8c.html#a06eff41f2393b373179804934f8252f5">More...</a><br /></td></tr>
<tr class="separator:a06eff41f2393b373179804934f8252f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad190613fbdf4ccf7aee7904c1419cdb2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#ad190613fbdf4ccf7aee7904c1419cdb2">check_is_symbol_0_pulse</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ad190613fbdf4ccf7aee7904c1419cdb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the pulse (high level) of a NEC symbol <code>0</code>.  <a href="fsm__rx__nec_8c.html#ad190613fbdf4ccf7aee7904c1419cdb2">More...</a><br /></td></tr>
<tr class="separator:ad190613fbdf4ccf7aee7904c1419cdb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1279ab4747f14fbf422a078af3cb34"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a1a1279ab4747f14fbf422a078af3cb34">check_is_symbol_1_pulse</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a1a1279ab4747f14fbf422a078af3cb34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we are parsing the pulse (high level) of a NEC symbol <code>1</code>.  <a href="fsm__rx__nec_8c.html#a1a1279ab4747f14fbf422a078af3cb34">More...</a><br /></td></tr>
<tr class="separator:a1a1279ab4747f14fbf422a078af3cb34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5a22faabe97590f8a0142ad40690d9"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#acc5a22faabe97590f8a0142ad40690d9">check_is_symbol_pulse_noise</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:acc5a22faabe97590f8a0142ad40690d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assuming that we are parsing the pulse (high level) of a NEC symbol, check if it is noise.  <a href="fsm__rx__nec_8c.html#acc5a22faabe97590f8a0142ad40690d9">More...</a><br /></td></tr>
<tr class="separator:acc5a22faabe97590f8a0142ad40690d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28206e2611f68f876c350525f2dca829"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a28206e2611f68f876c350525f2dca829">do_jump_to_next_edge</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a28206e2611f68f876c350525f2dca829"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move to the next time tick.  <a href="fsm__rx__nec_8c.html#a28206e2611f68f876c350525f2dca829">More...</a><br /></td></tr>
<tr class="separator:a28206e2611f68f876c350525f2dca829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab329be2f23969368b8b08b4957d0d6b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#ab329be2f23969368b8b08b4957d0d6b9">do_repetition_starts</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ab329be2f23969368b8b08b4957d0d6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">We have detected that a repetition and thus update the corresponding variables.  <a href="fsm__rx__nec_8c.html#ab329be2f23969368b8b08b4957d0d6b9">More...</a><br /></td></tr>
<tr class="separator:ab329be2f23969368b8b08b4957d0d6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f7aab25227fa806fde1c2667d61a83"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a73f7aab25227fa806fde1c2667d61a83">do_command_starts</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a73f7aab25227fa806fde1c2667d61a83"><td class="mdescLeft">&#160;</td><td class="mdescRight">We have detected that a command starts and thus update the corresponding variables.  <a href="fsm__rx__nec_8c.html#a73f7aab25227fa806fde1c2667d61a83">More...</a><br /></td></tr>
<tr class="separator:a73f7aab25227fa806fde1c2667d61a83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05971529f5c13d5f2f723c63d092dcfa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a05971529f5c13d5f2f723c63d092dcfa">do_reset_and_jump_to_next_edge</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a05971529f5c13d5f2f723c63d092dcfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the code and move to the next time tick.  <a href="fsm__rx__nec_8c.html#a05971529f5c13d5f2f723c63d092dcfa">More...</a><br /></td></tr>
<tr class="separator:a05971529f5c13d5f2f723c63d092dcfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536c5862350b2a38e8e0f35569999cc2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a536c5862350b2a38e8e0f35569999cc2">do_reset_and_jump_two_edges</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a536c5862350b2a38e8e0f35569999cc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the number of edges to read and move 2 time ticks ahead.  <a href="fsm__rx__nec_8c.html#a536c5862350b2a38e8e0f35569999cc2">More...</a><br /></td></tr>
<tr class="separator:a536c5862350b2a38e8e0f35569999cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d11fb1125c17ef982fafd8c31a1c61"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#ad0d11fb1125c17ef982fafd8c31a1c61">do_store_bit_0</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ad0d11fb1125c17ef982fafd8c31a1c61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a bit 0 to the code parsed.  <a href="fsm__rx__nec_8c.html#ad0d11fb1125c17ef982fafd8c31a1c61">More...</a><br /></td></tr>
<tr class="separator:ad0d11fb1125c17ef982fafd8c31a1c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afabe363e3e943df75f18f215a2472b8b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#afabe363e3e943df75f18f215a2472b8b">do_store_bit_1</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:afabe363e3e943df75f18f215a2472b8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a bit 1 to the code parsed.  <a href="fsm__rx__nec_8c.html#afabe363e3e943df75f18f215a2472b8b">More...</a><br /></td></tr>
<tr class="separator:afabe363e3e943df75f18f215a2472b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a751211a3ff975257510a36d1f59b5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#ad1a751211a3ff975257510a36d1f59b5">do_set_end</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:ad1a751211a3ff975257510a36d1f59b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish the signal processing ensuring there is no more edges to read.  <a href="fsm__rx__nec_8c.html#ad1a751211a3ff975257510a36d1f59b5">More...</a><br /></td></tr>
<tr class="separator:ad1a751211a3ff975257510a36d1f59b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb0fb47a15ae8fba7b280af0fd48d83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#afcb0fb47a15ae8fba7b280af0fd48d83">fsm_rx_NEC_new</a> ()</td></tr>
<tr class="memdesc:afcb0fb47a15ae8fba7b280af0fd48d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new NEC processing FSM.  <a href="fsm__rx__nec_8c.html#afcb0fb47a15ae8fba7b280af0fd48d83">More...</a><br /></td></tr>
<tr class="separator:afcb0fb47a15ae8fba7b280af0fd48d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112eb40ab6a909cbc0b1da5dfdb81a52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a112eb40ab6a909cbc0b1da5dfdb81a52">fsm_rx_NEC_init</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this)</td></tr>
<tr class="memdesc:a112eb40ab6a909cbc0b1da5dfdb81a52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a NEC processing FSM.  <a href="fsm__rx__nec_8c.html#a112eb40ab6a909cbc0b1da5dfdb81a52">More...</a><br /></td></tr>
<tr class="separator:a112eb40ab6a909cbc0b1da5dfdb81a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91dd2014035644b3319ef70cebe40b43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a91dd2014035644b3319ef70cebe40b43">fsm_rx_NEC_parse_code</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_this, uint16_t *p_edge_ticks, uint32_t num_edges, uint32_t *p_code)</td></tr>
<tr class="memdesc:a91dd2014035644b3319ef70cebe40b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a set of time ticks to a NEC code.  <a href="fsm__rx__nec_8c.html#a91dd2014035644b3319ef70cebe40b43">More...</a><br /></td></tr>
<tr class="separator:a91dd2014035644b3319ef70cebe40b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a34ca3568dd7710e122684fe97b0b010a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfsm__trans__t.html">fsm_trans_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm__rx__nec_8c.html#a34ca3568dd7710e122684fe97b0b010a">fsm_trans_rx_nec</a> []</td></tr>
<tr class="memdesc:a34ca3568dd7710e122684fe97b0b010a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array representing the transitions table of the NEC processing FSM.  <a href="fsm__rx__nec_8c.html#a34ca3568dd7710e122684fe97b0b010a">More...</a><br /></td></tr>
<tr class="separator:a34ca3568dd7710e122684fe97b0b010a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>NEC processing FSM main file. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-01-01 </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a43148ac7e1e7255aaf72bbc0a161b4be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43148ac7e1e7255aaf72bbc0a161b4be">&#9670;&nbsp;</a></span>FSM_RX_NEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4be">FSM_RX_NEC</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda"></a>NEC_IDLE&#160;</td><td class="fielddoc"><p>Starting state. Comes here at every new call to the FSM and when there is an error in the code. <b>Being at this state means that you are reading an edge in an even position.</b> </p>
</td></tr>
<tr><td class="fieldname"><a id="a43148ac7e1e7255aaf72bbc0a161b4bea363d3765068b3b1be9fb4e0f8418d101"></a>NEC_INIT&#160;</td><td class="fielddoc"><p>State while reading the preamble. <b>Being at this state means that you are reading an edge in an odd position.</b> </p>
</td></tr>
<tr><td class="fieldname"><a id="a43148ac7e1e7255aaf72bbc0a161b4bea49337ef62cfd41f06228546f18826e0c"></a>NEC_SYMBOL_SILENCE&#160;</td><td class="fielddoc"><p>State while reading a symbol silence in reception (low level). <b>Being at this state means that you are reading an edge in an even position.</b> </p>
</td></tr>
<tr><td class="fieldname"><a id="a43148ac7e1e7255aaf72bbc0a161b4bea4d930a7b04939f1ce2e86a310b55d86e"></a>NEC_SYMBOL_PULSE&#160;</td><td class="fielddoc"><p>State while reading a symbol pulse in reception (high level). <b>Being at this state means that you are reading an edge in an odd position.</b> </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a41d34b17798262ab95c14141f9be51b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41d34b17798262ab95c14141f9be51b1">&#9670;&nbsp;</a></span>_get_diff_ticks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t _get_diff_ticks </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_edge_ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Auxiliary function to compute the time difference (in ticks) between the current and the next edge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_edge_ticks</td><td>Pointer to the array containing the the time ticks of the edges detected by the infrared receiver </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time difference in ticks </dd></dl>

</div>
</div>
<a id="acd945b51ef6927ae34c0c06ee5a3219f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd945b51ef6927ae34c0c06ee5a3219f">&#9670;&nbsp;</a></span>_value_in_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool _value_in_range </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliary function to check if a given value is between two other values. </p>
<p>This is used to check if a time difference is between the NEC tolerance time interval.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Value to check </td></tr>
    <tr><td class="paramname">min</td><td>Minimum value allowed by the range (greater than or equal to). </td></tr>
    <tr><td class="paramname">max</td><td>Maximum value allowed by the range (lower than or equal to). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a9017904e997631307705dc351a083947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9017904e997631307705dc351a083947">&#9670;&nbsp;</a></span>check_is_init_noise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_init_noise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assuming that we are parsing the silence (low level) of the NEC prologue, check if it is noise. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a01ddf7564dfbb21d8734d1e31600fec7" title="Check if we are parsing the silence (low level) of the NEC prologue.">check_is_init_silence()</a></code> and return the inverse of its result. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="aedc929ec58cc2ea50df050002706a8d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc929ec58cc2ea50df050002706a8d3">&#9670;&nbsp;</a></span>check_is_init_pulse_noise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_init_pulse_noise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assuming that we are parsing the pulse (high level) of the NEC prologue, check if it is noise. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#adb69abb054df56d1c0f2812aeaf25c68" title="Check if we are parsing the pulse (high level) of the NEC prologue.">check_is_prologue_pulse()</a></code> and retrieve the value. <br  />
✅ 2. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a6e18ccf6b8ff9d748c389587f81645f1" title="Check if we are parsing the pulse (high level) of a NEC repetition.">check_is_repetition_pulse()</a></code> and retrieve the value. <br  />
✅ 3. If both functions return <code>false</code> then return <code>true</code>. Otherwise, return <code>false</code>. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a01ddf7564dfbb21d8734d1e31600fec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01ddf7564dfbb21d8734d1e31600fec7">&#9670;&nbsp;</a></span>check_is_init_silence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_init_silence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the silence (low level) of the NEC prologue. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1" title="Auxiliary function to compute the time difference (in ticks) between the current and the next edge.">_get_diff_ticks()</a></code> and retrieve the time difference. <br  />
✅ 2. Return the result of calling the function <code><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f" title="Auxiliary function to check if a given value is between two other values.">_value_in_range()</a></code> with the right arguments. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a2837dd36bc73b31f02c9cb2c9a022939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2837dd36bc73b31f02c9cb2c9a022939">&#9670;&nbsp;</a></span>check_is_last_symbol()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_last_symbol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the last symbol. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Return <code>true</code> if the number of <code>bits_remaining_to_read</code> equals 0. Otherwise, return <code>false</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="adb69abb054df56d1c0f2812aeaf25c68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb69abb054df56d1c0f2812aeaf25c68">&#9670;&nbsp;</a></span>check_is_prologue_pulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_prologue_pulse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the pulse (high level) of the NEC prologue. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1" title="Auxiliary function to compute the time difference (in ticks) between the current and the next edge.">_get_diff_ticks()</a></code> and retrieve the time difference. <br  />
✅ 2. Return the result of calling the function <code><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f" title="Auxiliary function to check if a given value is between two other values.">_value_in_range()</a></code> with the right arguments. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a6e18ccf6b8ff9d748c389587f81645f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e18ccf6b8ff9d748c389587f81645f1">&#9670;&nbsp;</a></span>check_is_repetition_pulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_repetition_pulse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the pulse (high level) of a NEC repetition. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1" title="Auxiliary function to compute the time difference (in ticks) between the current and the next edge.">_get_diff_ticks()</a></code> and retrieve the time difference. <br  />
✅ 2. Return the result of calling the function <code><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f" title="Auxiliary function to check if a given value is between two other values.">_value_in_range()</a></code> with the right arguments. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="ad190613fbdf4ccf7aee7904c1419cdb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad190613fbdf4ccf7aee7904c1419cdb2">&#9670;&nbsp;</a></span>check_is_symbol_0_pulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_symbol_0_pulse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the pulse (high level) of a NEC symbol <code>0</code>. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1" title="Auxiliary function to compute the time difference (in ticks) between the current and the next edge.">_get_diff_ticks()</a></code> and retrieve the time difference. <br  />
✅ 2. Return the result of calling the function <code><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f" title="Auxiliary function to check if a given value is between two other values.">_value_in_range()</a></code> with the right arguments. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a1a1279ab4747f14fbf422a078af3cb34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1279ab4747f14fbf422a078af3cb34">&#9670;&nbsp;</a></span>check_is_symbol_1_pulse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_symbol_1_pulse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the pulse (high level) of a NEC symbol <code>1</code>. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1" title="Auxiliary function to compute the time difference (in ticks) between the current and the next edge.">_get_diff_ticks()</a></code> and retrieve the time difference. <br  />
✅ 2. Return the result of calling the function <code><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f" title="Auxiliary function to check if a given value is between two other values.">_value_in_range()</a></code> with the right arguments. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="acc5a22faabe97590f8a0142ad40690d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc5a22faabe97590f8a0142ad40690d9">&#9670;&nbsp;</a></span>check_is_symbol_pulse_noise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_symbol_pulse_noise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assuming that we are parsing the pulse (high level) of a NEC symbol, check if it is noise. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#ad190613fbdf4ccf7aee7904c1419cdb2" title="Check if we are parsing the pulse (high level) of a NEC symbol 0.">check_is_symbol_0_pulse()</a></code> and retrieve the value. <br  />
✅ 2. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a1a1279ab4747f14fbf422a078af3cb34" title="Check if we are parsing the pulse (high level) of a NEC symbol 1.">check_is_symbol_1_pulse()</a></code> and retrieve the value. <br  />
✅ 3. If both functions return <code>false</code> then return <code>true</code>. Otherwise, return <code>false</code>. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="af9b517be66df83069f390587ef75bea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9b517be66df83069f390587ef75bea5">&#9670;&nbsp;</a></span>check_is_symbol_silence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_symbol_silence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if we are parsing the silence (low level) of a NEC symbol. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a2837dd36bc73b31f02c9cb2c9a022939" title="Check if we are parsing the last symbol.">check_is_last_symbol()</a></code>. If the result is <code>true</code> exit the function immediately returning <code>false</code>. <br  />
✅ 2. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a41d34b17798262ab95c14141f9be51b1" title="Auxiliary function to compute the time difference (in ticks) between the current and the next edge.">_get_diff_ticks()</a></code> and retrieve the time difference. <br  />
✅ 3. Return the result of calling the function <code><a class="el" href="fsm__rx__nec_8c.html#acd945b51ef6927ae34c0c06ee5a3219f" title="Auxiliary function to check if a given value is between two other values.">_value_in_range()</a></code> with the right arguments. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a06eff41f2393b373179804934f8252f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06eff41f2393b373179804934f8252f5">&#9670;&nbsp;</a></span>check_is_symbol_silence_noise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool check_is_symbol_silence_noise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assuming that we are parsing the silence (low level) of a NEC symbol, check if it is noise. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Call function <code><a class="el" href="fsm__rx__nec_8c.html#a2837dd36bc73b31f02c9cb2c9a022939" title="Check if we are parsing the last symbol.">check_is_last_symbol()</a></code>. If the result is <code>true</code> exit the function immediately returning <code>false</code>. <br  />
✅ 2. Call function <code><a class="el" href="fsm__rx__nec_8c.html#af9b517be66df83069f390587ef75bea5" title="Check if we are parsing the silence (low level) of a NEC symbol.">check_is_symbol_silence()</a></code> and return the inverse of its result. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a73f7aab25227fa806fde1c2667d61a83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f7aab25227fa806fde1c2667d61a83">&#9670;&nbsp;</a></span>do_command_starts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_command_starts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We have detected that a command starts and thus update the corresponding variables. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Increase the value of the pointer <code>p_edge_ticks</code> to point to next element of the array. <br  />
✅ 2. Decrease the value of the <code>num_edges_to_read</code> in <code>1</code>. <br  />
✅ 3. Set the value of the <code>bits_remaining_to_read</code> to <a class="el" href="fsm__rx__nec_8h.html#afd182fa61a5d71dc3717c7adf73cb38f">NEC_FRAME_BITS</a>. <br  />
✅ 4. Set the value of <code>is_repetition</code> to indicate that it is not a repetition. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a28206e2611f68f876c350525f2dca829"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28206e2611f68f876c350525f2dca829">&#9670;&nbsp;</a></span>do_jump_to_next_edge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_jump_to_next_edge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move to the next time tick. </p>
<p>The effects of calling this functions are:</p><ul>
<li>If we are in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea363d3765068b3b1be9fb4e0f8418d101">NEC_INIT</a> and we detect a noise, ignore it and move on. It was an error and the FSM comes back to the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a>.</li>
<li>If we are in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea49337ef62cfd41f06228546f18826e0c">NEC_SYMBOL_SILENCE</a>, we are doing well. Update the information and continue. The FSM goes to the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea4d930a7b04939f1ce2e86a310b55d86e">NEC_SYMBOL_PULSE</a>.</li>
<li>If we are in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea4d930a7b04939f1ce2e86a310b55d86e">NEC_SYMBOL_PULSE</a> and we detect a noise, ignore it and move on. It was an error and the FSM comes back to the state state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a>.</li>
</ul>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Increase the value of the pointer <code>p_edge_ticks</code> to point to next element of the array. <br  />
✅ 2. Decrease the value of the <code>num_edges_to_read</code> in <code>1</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab329be2f23969368b8b08b4957d0d6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab329be2f23969368b8b08b4957d0d6b9">&#9670;&nbsp;</a></span>do_repetition_starts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_repetition_starts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We have detected that a repetition and thus update the corresponding variables. </p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Increase the value of the pointer <code>p_edge_ticks</code> to point to next element of the array. <br  />
✅ 2. Decrease the value of the <code>num_edges_to_read</code> in <code>1</code>. <br  />
✅ 3. Set the value of the <code>bits_remaining_to_read</code> to <code>0</code>. <br  />
✅ 4. Set the value of <code>is_repetition</code> to indicate that it has been detected a repetition. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a05971529f5c13d5f2f723c63d092dcfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05971529f5c13d5f2f723c63d092dcfa">&#9670;&nbsp;</a></span>do_reset_and_jump_to_next_edge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_reset_and_jump_to_next_edge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the code and move to the next time tick. </p>
<p>This happens when we are in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a> and we detect the silence of a NEC prologue. The FSM goes to the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea363d3765068b3b1be9fb4e0f8418d101">NEC_INIT</a>. We still do not know if we are at the beginning of a command or a repetition.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Increase the value of the pointer <code>p_edge_ticks</code> to point to next element of the array. <br  />
✅ 2. Decrease the value of the <code>num_edges_to_read</code> in <code>1</code>. <br  />
✅ 3. Set the value of the <code>code</code> to <code>0</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a536c5862350b2a38e8e0f35569999cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536c5862350b2a38e8e0f35569999cc2">&#9670;&nbsp;</a></span>do_reset_and_jump_two_edges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_reset_and_jump_two_edges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the number of edges to read and move 2 time ticks ahead. </p>
<p>This happens when we are in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a> and we detect a silence that is a noise. The FSM remains in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a>. Cause: there has been 2 edges in the infrared receiver (low and then high) but the do not correspond to the beginning of a command nor a repetition. Action: move 2 edges ahead if exists (skipping the following rising edge). This might be a noise before the reception of a command.</p>
<p>Remember that in the state <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a> we are in an even edge.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Increase the value of the pointer <code>p_edge_ticks</code> to point 2 elements ahead. <br  />
✅ 2. If the <code>num_edges_to_read</code> is higher than <code>1</code> (meaning that there are more edges in the array) decrease its value by <code>2</code> (because we are skipping one edge). Otherwise, set its value to <code>0</code> (there are no more edges). <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad1a751211a3ff975257510a36d1f59b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a751211a3ff975257510a36d1f59b5">&#9670;&nbsp;</a></span>do_set_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_set_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finish the signal processing ensuring there is no more edges to read. </p>
<ul>
<li>&gt; <b>TO-DO alumnos:</b> <blockquote class="doxtable">
<p></p>
<p>✅ 1. Set the value of the <code>num_edges_to_read</code> to <code>0</code>. <br  />
</p>
</blockquote>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad0d11fb1125c17ef982fafd8c31a1c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0d11fb1125c17ef982fafd8c31a1c61">&#9670;&nbsp;</a></span>do_store_bit_0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_store_bit_0 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append a bit 0 to the code parsed. </p>
<p>When a NEC symbol 0 is detected we must append a binary <code>0</code> to the Least Significant Bit (LSB) of the <code>code</code>. To do so:</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Shift <code>code</code> left 1 position. You can ensure the correct result of the operation by multiplying it with the mask <code>0xFFFFFFFEUL</code>. <br  />
✅ 2. Increase the value of the pointer <code>p_edge_ticks</code> to point to next element of the array. <br  />
✅ 3. Decrease the value of the <code>num_edges_to_read</code> in <code>1</code>. <br  />
✅ 4. Decrease the value of the <code>bits_remaining_to_read</code> in <code>1</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afabe363e3e943df75f18f215a2472b8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afabe363e3e943df75f18f215a2472b8b">&#9670;&nbsp;</a></span>do_store_bit_1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_store_bit_1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append a bit 1 to the code parsed. </p>
<p>When a NEC symbol 1 is detected we must append a binary <code>1</code> to the Least Significant Bit (LSB) of the <code>code</code>. To do so:</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Shift <code>code</code> left 1 position and add a binary <code>1</code>. <br  />
✅ 2. Increase the value of the pointer <code>p_edge_ticks</code> to point to next element of the array. <br  />
✅ 3. Decrease the value of the <code>num_edges_to_read</code> in <code>1</code>. <br  />
✅ 4. Decrease the value of the <code>bits_remaining_to_read</code> in <code>1</code>. <br  />
</p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a112eb40ab6a909cbc0b1da5dfdb81a52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112eb40ab6a909cbc0b1da5dfdb81a52">&#9670;&nbsp;</a></span>fsm_rx_NEC_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_rx_NEC_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a NEC processing FSM. </p>
<p>This function initializes the default values of the FSM struct. The FSM process the data for any receiver and it does not contain status information of any of them.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Initialize the fields <code>code</code> and <code>num_edges_to_read</code> to 0. <br  />
✅ 2. Initialize the field <code>p_edge_ticks</code> as pointer to <code>NULL</code>, for example. <br  />
✅ 3. Initialize the field <code>is_repetition</code> to <code>false</code>. </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcb0fb47a15ae8fba7b280af0fd48d83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcb0fb47a15ae8fba7b280af0fd48d83">&#9670;&nbsp;</a></span>fsm_rx_NEC_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__t.html">fsm_t</a>* fsm_rx_NEC_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new NEC processing FSM. </p>
<p>This FSM is created when the main system (RETINA) works in reception mode and it is destroyed when the system works in transmission mode.</p>
<p>This FSM parses a given array of time-ticks into a NEC code. Each time tick indicates that there was an edge (rising or falling edge) in the GPIO connected to the infrared receiver.</p>
<dl class="section attention"><dt>Attention</dt><dd>The GPIO of the infrared receiver works in input mode and it is always at high level, thus, <b>the first edge is always a falling edge</b>. Being this so, we can assert that: <em>all edges in even positions of the array are falling edges, and edges in odd positions of the array are rising edges</em>. This is useful information to debug the FSM.</dd></dl>
<p>The FSM works with time tolerances (deviations in the pulse and silence widths). It is assumed that the timer used to control the time ticks has a resolution of <a class="el" href="fsm__rx__nec_8h.html#ad49fb3e7b8b2467df81ad95b75ef2ab8">NEC_RX_TIMER_TICK_BASE_US</a> microseconds.</p>
<p><b>The FSM goes through all the edges comparing the duration between the current and the following edge</b>. With this information, we can check if we are parsing (i) the prologue, (ii) a symbol 0, (iii) a symbol 1, (iv) the epilogue, (v) a repetition, or (vi) if the infrared data received was noise of a spurious event, or even a code of another protocol.</p>
<p>The FSM receives information of the time ticks of the edges and the number of edges detected. The FSM parses the code and returns it as a pointer. It also indicates if the code was a repetition code or not (it was a command). The FSM stores information on the number of bits remaining to read (expected to be <a class="el" href="fsm__rx__nec_8h.html#afd182fa61a5d71dc3717c7adf73cb38f">NEC_FRAME_BITS</a>).</p>
<p>Check the transition table <code>fsm_trans_rx_nec</code> for further information.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the FSM that parses infrared data as NEC protocol </dd></dl>

</div>
</div>
<a id="a91dd2014035644b3319ef70cebe40b43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91dd2014035644b3319ef70cebe40b43">&#9670;&nbsp;</a></span>fsm_rx_NEC_parse_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fsm_rx_NEC_parse_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_edge_ticks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_edges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>p_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process a set of time ticks to a NEC code. </p>
<p>This function resets the fields of the struct of the FSM to ensure that on each new reception the FSM starts in the <a class="el" href="fsm__rx__nec_8c.html#a43148ac7e1e7255aaf72bbc0a161b4bea0959053f2a62aa6ee559b8ec19d09fda">NEC_IDLE</a> state and all codes and data is brand new. After that, the function runs the FSM once for each edge detected. At the end it stores the code parsed and informs if the code was a command or a repetition.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos:</b></p>
<p>✅ 1. Set the field <code>current_state</code> of the FSM <code>f</code> in the struct <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code> to the initial state. <br  />
✅ 2. Set the field <code>code</code> to 0, and the field <code>is_repetition</code> to <code>false</code>. <br  />
✅ 3. Save in the field <code>p_edge_ticks</code> the received value which is the pointer to the array where the edge time ticks are stored. Do the same for the field <code>num_edges_to_read</code>. <br  />
✅ 4. Run the FSM with <code><a class="el" href="fsm_8h.html#ab9f849bd2d80e5efaa320ddb59b4b246" title="Check the full transition table.">fsm_fire()</a></code> <b>while</b> the <code>num_edges_to_read</code> is greater than <code>1</code>. <br  />
&#160;&#160;&#160;&#160;💡 This means that FSM goes through all the edges identifying if it corresponds to the epilogue, a symbol, etc. <br  />
&#160;&#160;&#160;&#160;💡 <b>The FSM needs 2 edges to compare times: the time tick of the current edge, and the time tick of the next one.</b> Look closer to the figure below. If the received code is correct -either it is a command or a repetition- the number of edges is even. Thus, the last edge might not have an edge after it to compare times. This is reason why the FSM stops running when the number of edges to read equals 1. <br  />
&#160;&#160;&#160;&#160;💡 You need to pass the memory address of the FSM (field <code>f</code> of the struct) to the function <code><a class="el" href="fsm_8h.html#ab9f849bd2d80e5efaa320ddb59b4b246" title="Check the full transition table.">fsm_fire()</a></code>. <br  />
✅ 5. Save in the memory where the pointer <code>p_code</code> points the value of the field <code>code</code>. <br  />
✅ 6. Return the field <code>is_repetition</code>. <br  />
</p>
</blockquote>
<p><br  />
 </p><div class="image">
<img src="nec_code_edges.png" alt=""/>
</div>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_this</td><td>Pointer to an <code><a class="el" href="structfsm__t.html" title="Structure that defines a state machine.">fsm_t</a></code> struct than contains an <code><a class="el" href="structfsm__rx__nec__t.html" title="Structure to define the NEC FSM.">fsm_rx_nec_t</a></code> </td></tr>
    <tr><td class="paramname">p_edge_ticks</td><td>Pointer to the array containing the the time ticks of the edges detected by the infrared receiver </td></tr>
    <tr><td class="paramname">num_edges</td><td>Number of edges detected by the infrared receiver. It is used to know how far to count. </td></tr>
    <tr><td class="paramname">p_code</td><td>Pointer given to store the </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true to indicate that the received code was a repetition </dd>
<dd>
false to indicate that the received code was not a repetition (it was a command or noise) </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a34ca3568dd7710e122684fe97b0b010a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ca3568dd7710e122684fe97b0b010a">&#9670;&nbsp;</a></span>fsm_trans_rx_nec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> fsm_trans_rx_nec[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array representing the transitions table of the NEC processing FSM. </p>
<p><b>The FSM goes through all the edges comparing the duration between the current and the following edge</b>. With this information, we can check if we are parsing (i) the prologue, (ii) a symbol 0, (iii) a symbol 1, (iv) the epilogue, (v) a repetition, or (vi) if the infrared data received was noise of a spurious event, or even a code of another protocol.</p>
<div class="image">
<img src="fsm_rx_nec.png" alt=""/>
</div>
 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_4e4d22e38ca4e2e8207825ee2d00bc54.html">src</a></li><li class="navelem"><a class="el" href="fsm__rx__nec_8c.html">fsm_rx_nec.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
